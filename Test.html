<!DOCTYPE html>
<html>
<head>
  <title>Test Amphit</title>
  <style>
    body {
      background-color: #F4EDEB; /* Colore sabbia per lo sfondo */
      margin: 0;
      padding: 0;
    }
    
    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: #FFFFFF; /* Colore bianco per il contenitore */
    }
    
    h1 {
      text-align: center;
    }
    
    .product {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .product img {
      width: 200px; /* Larghezza desiderata per l'immagine del prodotto */
      margin-right: 10px;
    }
    
    .raffle {
      text-align: center;
      margin-top: 20px;
    }
    
    .raffle input[type="text"],
    .raffle button {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Test Amphit</h1>
    
    <div class="product">
      <img src="prodotto.jpg" alt="Prodotto">
      <div>
        <h2>Nome Prodotto</h2>
        <p>Descrizione del prodotto</p>
        <p>N° Ticket disponibili: 140</p>
        <div id="ticketsRemaining">Biglietti rimasti: <span id="remainingCount"></span></div>
      </div>
    </div>
    
    <div class="raffle">
      <h3>Raffle</h3>
      <p>Partecipa alla raffle per avere la possibilità di vincere il prodotto!</p>
      <input type="text" placeholder="Inserisci la tua email">
      <input type="number" id="ticketInput" placeholder="Numero di biglietti">
      <button onclick="participateRaffle()">Partecipa</button>
    </div>
  </div>

  <script>
 var totalTickets = 140; // Numero totale di biglietti disponibili
var maxTickets = Math.floor(totalTickets * 0.1); // Limite massimo del 10% dei biglietti

function showAlert(message) {
  var alertElement = document.querySelector('#alert');
  alertElement.textContent = message;
  alertElement.style.display = 'block';
}

function updateTicketCount() {
  var remainingCountElement = document.querySelector('#remainingCount');
  remainingCountElement.textContent = totalTickets - ticketCount; // Calcola i biglietti rimanenti
}

function participateRaffle() {
  var emailInput = document.querySelector('input[type="text"]');
  var ticketInput = document.querySelector('#ticketInput');
  var email = emailInput.value;
  var tickets = parseInt(ticketInput.value);

  var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  if (email !== '') {
    if (emailRegex.test(email) && tickets > 0 && tickets <= maxTickets) {
      // Effettua qui le operazioni per partecipare alla raffle con il numero specificato di biglietti
      for (var i = 0; i < tickets; i++) {
        ticketCount++; // Incrementa il contatore dei biglietti
        // Codice per assegnare e numerare il biglietto (ad esempio, salvare in un database o creare un elemento HTML)
      }

      var successMessage = 'Grazie per aver partecipato alla raffle con l\'indirizzo email ' + email + '! Hai acquistato ' + tickets + ' biglietti.';
      showAlert(successMessage);
      emailInput.value = '';
      ticketInput.value = '';

      updateTicketCount(); // Richiama la funzione per aggiornare il numero dei biglietti rimanenti
    }
    } else {
      if (!emailRegex.test(email)) {
        var invalidEmailMessage = 'Inserisci un indirizzo email valido.';
        showAlert(invalidEmailMessage);
      } else if (tickets <= 0) {
        var invalidTicketsMessage = 'Inserisci un numero di biglietti valido (superiore a 0).';
        showAlert(invalidTicketsMessage);
      } else {
        var maxTicketsMessage = 'Puoi acquistare al massimo ' + maxTickets + ' biglietti.';
        showAlert(maxTicketsMessage);
      }
    }
  } else {
    var missingInfoMessage = 'Inserisci il tuo indirizzo email e il numero di biglietti per partecipare alla raffle.';
    showAlert(missingInfoMessage);
  }

    updateTicketCount(); // Aggiorna il numero dei biglietti rimanenti
}

window.onload = function() {
  var ticketInput = document.querySelector('#ticketInput');
  var alertElement = document.createElement('div');
alertElement.id = 'alert';
document.body.appendChild(alertElement);

  
  ticketInput.addEventListener('input', function() {
    var tickets = parseInt(ticketInput.value);

    if (tickets <= 0 || tickets > maxTickets) {
      ticketInput.value = ''; // Resetta il valore se non è valido
    }
  });

  alertElement.addEventListener('click', function() {
    alertElement.style.display = 'none';
  });
  updateTicketCount(); // Inizializza il numero dei biglietti rimanenti
}


  </script>
</body>
</html>